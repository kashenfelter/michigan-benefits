<% content_for :header_title, "Income and Employment" %>

<% content_for :form_card_title do %>
  <% if current_application.single_member_household? %>
    How many jobs do you have?
  <% else %>
    Who currently has a job?
  <% end %>
<% end %>

<% content_for :form_card_body do %>
    <%= fields_for(:form, @form, builder: MbFormBuilder) do |f| %>
      <% @form.members.each_with_index do |member, index| %>
        <% if member.primary_member? %>
          <%= f.mb_incrementer :job_counts,
                               "How many jobs do you have?",
                               options: {
                                   min: "0",
                                   max: "9",
                               },
                               hide_label: current_application.single_member_household?,
                               value_is_array: true,
                               value: @form.job_counts[index],
                               id_suffix: index %>
        <% else %>
          <%= f.mb_incrementer :job_counts,
                                "How many jobs does #{member.display_name} have?",
                                options: {
                                    min: "0",
                                    max: "9",
                                },
                                hide_label: false,
                                value_is_array: true,
                                value: @form.job_counts[index],
                                id_suffix: index %>
        <% end %>
      <% end %>
    <% end %>
<% end %>

